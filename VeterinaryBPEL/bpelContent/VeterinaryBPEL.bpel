<!-- VeterinaryBPEL BPEL Process [Generated by the Eclipse BPEL Designer] -->
<!-- Date: Thu Jul 07 17:16:17 CET 2022 -->
<bpel:process name="VeterinaryBPEL"
         targetNamespace="it.univaq.disim.bpd.VeterinaryBPEL"
         suppressJoinFailure="yes"
         xmlns:tns="it.univaq.disim.bpd.VeterinaryBPEL"
         xmlns:bpel="http://docs.oasis-open.org/wsbpel/2.0/process/executable"
         xmlns:ns="http://it.univaq.disim.bpd.VeterinaryBPEL" xmlns:ns0="http://eu.chorevolution.farmbusinessstartup/veterinary" xmlns:ns1="http://eu.chorevolution.farmbusinessstartup/localhealthcarecompany">
         
    <!-- Import the client WSDL -->
    <bpel:import namespace="http://eu.chorevolution.farmbusinessstartup/localhealthcarecompany" location="localhealthcarecompany.wsdl" importType="http://schemas.xmlsoap.org/wsdl/"></bpel:import>
    <bpel:import namespace="http://eu.chorevolution.farmbusinessstartup/veterinary" location="Veterinary.wsdl" importType="http://schemas.xmlsoap.org/wsdl/"></bpel:import>
    <bpel:import namespace="http://it.univaq.disim.bpd.VeterinaryBPEL" location="VeterinaryBPEL.wsdl" importType="http://schemas.xmlsoap.org/wsdl/"></bpel:import>
    <bpel:import location="VeterinaryBPELArtifacts.wsdl" namespace="it.univaq.disim.bpd.VeterinaryBPEL" 
	        importType="http://schemas.xmlsoap.org/wsdl/" />

    <!-- ================================================================= -->         
    <!-- ORCHESTRATION LOGIC                                               -->
    <!-- Set of activities coordinating the flow of messages across the    -->
    <!-- services integrated within this business process                  -->
    <!-- ================================================================= -->         
    <bpel:partnerLinks>
        <bpel:partnerLink name="LocalHealthcareCompanyPortSoap11" partnerLinkType="tns:LocalHealthcareCompanyPlType" myRole="VeterinaryRole" partnerRole="LocalHealthcareCompanyPortSoap11"></bpel:partnerLink>
        <bpel:partnerLink name="Veterinary" partnerLinkType="tns:VeterinaryPlType" partnerRole="VeterinaryRole"></bpel:partnerLink>
        <bpel:partnerLink name="RegistryOffice" partnerLinkType="tns:RegistryOfficePlType" myRole="VeterinaryRole" partnerRole="LocalHealthcareCompanyRegistryOfficePort"></bpel:partnerLink>
    </bpel:partnerLinks>
    <bpel:variables>
        <bpel:variable name="FarmSiteInspectionRequest" messageType="ns:farmSiteInspectionRequest"></bpel:variable>
        <bpel:variable name="FarmSiteInspectionResponseLogic" messageType="ns0:farmSiteInspectionRequestMessageResponse"></bpel:variable>
        <bpel:variable name="FarmSiteInspectionRequestLogic" messageType="ns0:farmSiteInspectionRequestMessageRequest"></bpel:variable>
        <bpel:variable name="SendFarmSiteInspectionResponseResponse" messageType="ns0:sendFarmSiteInspectionResponseMessageResponse"></bpel:variable>
        <bpel:variable name="SendFarmSiteInspectionResponseRequest" messageType="ns0:sendFarmSiteInspectionResponseMessageRequest"></bpel:variable>
        <bpel:variable name="FarmSiteInspectionVerbalRequest" messageType="ns1:farmSiteInspectionResponseElementRequest"></bpel:variable>
        <bpel:variable name="FarmHealthcareRegistrationRequest" messageType="ns:farmRegistrationNotification"></bpel:variable>
        <bpel:variable name="FarmHealthcareRegResponse" messageType="ns0:farmRegistrationNotificationMessageResponse"></bpel:variable>
        <bpel:variable name="FarmHealthcareRegRequest" messageType="ns0:farmRegistrationNotificationMessageRequest"></bpel:variable>
    </bpel:variables>
    <bpel:sequence name="main">
        <bpel:receive name="ReceiveFarmOpeningSiteInspectionRequest" partnerLink="LocalHealthcareCompanyPortSoap11" operation="FarmOpeningSiteInspectionRequest" portType="ns:VeterinaryBpel" variable="FarmSiteInspectionRequest" createInstance="yes"></bpel:receive>
        
        <bpel:assign validate="no" name="AssignFarmOpeningSiteInspectionRequest">
            <bpel:copy>
                <bpel:from><bpel:literal xml:space="preserve"><p:farmSiteInspectionRequestElementRequest xmlns:p="http://eu.chorevolution.farmbusinessstartup/veterinary" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <choreographyId>
    <choreographyId>choreographyId</choreographyId>
  </choreographyId>
  <senderParticipantName>Local Healthcare Company</senderParticipantName>
  <receiverParticipantName>Veterinary</receiverParticipantName>
  <choreographyTaskName>Farm Opening Site Inspection Request</choreographyTaskName>
  <inputMessageName>farmSiteInspectionRequest</inputMessageName>
  <inputMessageData>
    <farmName>farmName</farmName>
    <companyName>companyName</companyName>
    <siteAddress>
      <city>city</city>
      <street>street</street>
      <postcode>0</postcode>
    </siteAddress>
    <farmSurface>0</farmSurface>
    <productionType>weaning center</productionType>
    <breedingMethodologyType>intensive</breedingMethodologyType>
    <siteInspectionDeadline>2001-01-01</siteInspectionDeadline>
  </inputMessageData>
</p:farmSiteInspectionRequestElementRequest></bpel:literal></bpel:from>
                <bpel:to variable="FarmSiteInspectionRequestLogic" part="parameters"></bpel:to>
            </bpel:copy>
            
            
            <bpel:copy>
                <bpel:from part="parameters" variable="FarmSiteInspectionRequest">
                    <bpel:query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">
                        <![CDATA[ChoreographyID]]>
                    </bpel:query>
                </bpel:from>
                <bpel:to part="parameters" variable="FarmSiteInspectionRequestLogic">
                    <bpel:query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">
                        <![CDATA[choreographyId/choreographyId]]>
                    </bpel:query>
                </bpel:to>
            </bpel:copy>
            <bpel:copy>
                <bpel:from part="parameters" variable="FarmSiteInspectionRequest">
                    <bpel:query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">
                        <![CDATA[farmSiteInspectionRequestDetails]]>
                    </bpel:query>
                </bpel:from>
                <bpel:to part="parameters" variable="FarmSiteInspectionRequestLogic">
                    <bpel:query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">
                        <![CDATA[inputMessageData]]>
                    </bpel:query>
                </bpel:to>
            </bpel:copy>
        </bpel:assign>
        <bpel:invoke name="InvokeFarmOpeningSiteInspectionLogic" partnerLink="Veterinary" operation="farmOpeningSiteInspectionRequest" portType="ns0:VeterinaryPT" inputVariable="FarmSiteInspectionRequestLogic" outputVariable="FarmSiteInspectionResponseLogic"></bpel:invoke>
        <bpel:assign validate="no" name="AssignSendFarmSiteInspectionResponseLogic">
            <bpel:copy>
                <bpel:from><bpel:literal xml:space="preserve"><p:sendFarmSiteInspectionResponseElementRequest xmlns:p="http://eu.chorevolution.farmbusinessstartup/veterinary" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <choreographyId>
    <choreographyId>choreographyId</choreographyId>
  </choreographyId>
  <senderParticipantName>Veterinary</senderParticipantName>
  <receiverParticipantName>Local Healthcare Company</receiverParticipantName>
  <choreographyTaskName>Farm Site Inspection Verbal</choreographyTaskName>
  <inputMessageName>farmSiteInspectionResponse</inputMessageName>
</p:sendFarmSiteInspectionResponseElementRequest></bpel:literal></bpel:from>
                <bpel:to variable="SendFarmSiteInspectionResponseRequest" part="parameters"></bpel:to>
            </bpel:copy>
            <bpel:copy>
                <bpel:from part="parameters" variable="FarmSiteInspectionRequestLogic">
                    <bpel:query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">
                        <![CDATA[choreographyId/choreographyId]]>
                    </bpel:query>
                </bpel:from>
                <bpel:to part="parameters" variable="SendFarmSiteInspectionResponseRequest">
                    <bpel:query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">
                        <![CDATA[choreographyId/choreographyId]]>
                    </bpel:query>
                </bpel:to>
            </bpel:copy>
        </bpel:assign>
        <bpel:invoke name="InvokeFarmSiteInspectionResponse" partnerLink="Veterinary" operation="sendFarmSiteInspectionResponse" portType="ns0:VeterinaryPT" inputVariable="SendFarmSiteInspectionResponseRequest" outputVariable="SendFarmSiteInspectionResponseResponse"></bpel:invoke>
        <bpel:assign validate="no" name="AssignFarmSiteInspectionVerbal">
            <bpel:copy>
                <bpel:from><bpel:literal><lhc:farmSiteInspectionResponse xmlns:lhc="http://it.univaq.disim.bpd.LocalHealthcareCompanyBPEL" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <ChoreographyID>ChoreographyID</ChoreographyID>
  <siteInspectionVerbal>
    <veterinaryName>veterinaryName</veterinaryName>
    <veterinarySurname>veterinarySurname</veterinarySurname>
    <siteAddress>
      <city>city</city>
      <street>street</street>
      <postcode>0</postcode>
    </siteAddress>
    <farmSurface>0</farmSurface>
    <productionType>weaning center</productionType>
    <breedingMethodologyType>intensive</breedingMethodologyType>
    <siteInspectionDate>2001-01-01</siteInspectionDate>
    <referenceLegislation>referenceLegislation</referenceLegislation>
  </siteInspectionVerbal>
</lhc:farmSiteInspectionResponse>
</bpel:literal></bpel:from>
                <bpel:to variable="FarmSiteInspectionVerbalRequest" part="farmSiteInspectionResponseElementRequest"></bpel:to>
            </bpel:copy>
            
            
            <bpel:copy>
                <bpel:from part="parameters" variable="SendFarmSiteInspectionResponseResponse">
                    <bpel:query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">
                        <![CDATA[inputMessageData/siteInspectionVerbal]]>
                    </bpel:query>
                </bpel:from>
                <bpel:to part="farmSiteInspectionResponseElementRequest" variable="FarmSiteInspectionVerbalRequest">
                    <bpel:query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">
                        <![CDATA[siteInspectionVerbal]]>
                    </bpel:query>
                </bpel:to>
            </bpel:copy>
            <bpel:copy>
                <bpel:from part="parameters" variable="SendFarmSiteInspectionResponseRequest">
                    <bpel:query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">
                        <![CDATA[choreographyId/choreographyId]]>
                    </bpel:query>
                </bpel:from>
                <bpel:to part="parameters" variable="FarmSiteInspectionVerbalRequest">
                    <bpel:query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">
                        <![CDATA[ChoreographyID]]>
                    </bpel:query>
                </bpel:to>
            </bpel:copy>
        </bpel:assign>
        
        <bpel:invoke name="InvokeFarmSiteInspectionVerbal" partnerLink="LocalHealthcareCompany" operation="FarmSiteInspectionVerbal" portType="ns1:LocalHealthcareCompanyBpel" inputVariable="FarmSiteInspectionVerbalRequest"></bpel:invoke>
        <bpel:receive name="ReceiveFarmHealthcareRegistration" partnerLink="RegistryOffice" operation="FarmHealthcareRegistration" portType="ns:VeterinaryBpel" variable="FarmHealthcareRegistrationRequest"></bpel:receive>
        <bpel:assign validate="no" name="AssignFarmHealthcareRegLogic">
            <bpel:copy>
                <bpel:from><bpel:literal xml:space="preserve"><p:farmRegistrationNotificationElementRequest xmlns:p="http://eu.chorevolution.farmbusinessstartup/veterinary" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <choreographyId>
    <choreographyId>choreographyId</choreographyId>
  </choreographyId>
  <senderParticipantName>Registry Office</senderParticipantName>
  <receiverParticipantName>Veterinary</receiverParticipantName>
  <choreographyTaskName>Farm Healthcare Registration</choreographyTaskName>
  <inputMessageName>farmRegistrationNotification</inputMessageName>
  <inputMessageData>
    <farmCode>farmCode</farmCode>
    <farmName>farmName</farmName>
    <siteAddress>
      <city>city</city>
      <street>street</street>
      <postcode>0</postcode>
    </siteAddress>
    <farmSurface>0</farmSurface>
    <productionType>weaning center</productionType>
    <breedingMethodologyType>intensive</breedingMethodologyType>
  </inputMessageData>
</p:farmRegistrationNotificationElementRequest></bpel:literal></bpel:from>
                <bpel:to variable="FarmHealthcareRegRequest" part="parameters"></bpel:to>
            </bpel:copy>
            <bpel:copy>
                <bpel:from part="parameters" variable="FarmHealthcareRegistrationRequest">
                    <bpel:query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">
                        <![CDATA[ChoreographyID]]>
                    </bpel:query>
                </bpel:from>
                <bpel:to part="parameters" variable="FarmHealthcareRegRequest">
                    <bpel:query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">
                        <![CDATA[choreographyId/choreographyId]]>
                    </bpel:query>
                </bpel:to>
            </bpel:copy>
            <bpel:copy>
                <bpel:from part="parameters" variable="FarmHealthcareRegistrationRequest">
                    <bpel:query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">
                        <![CDATA[farmRegistrationNotificationDetails]]>
                    </bpel:query>
                </bpel:from>
                <bpel:to part="parameters" variable="FarmHealthcareRegRequest">
                    <bpel:query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0"><![CDATA[inputMessageData]]></bpel:query>
                </bpel:to>
            </bpel:copy>
        </bpel:assign>
        <bpel:invoke name="InvokeFarmHealthcareRegistrationLogic" partnerLink="Veterinary" operation="farmHealthcareRegistration" portType="ns0:VeterinaryPT" inputVariable="FarmHealthcareRegRequest" outputVariable="FarmHealthcareRegResponse"></bpel:invoke>
    </bpel:sequence>    
</bpel:process>

